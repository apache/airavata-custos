---
- debug: msg="START vyos cli/net_logging.yaml on connection={{ ansible_connection
    }}"

- name: delete logging - setup
  register: result
  ansible.netcommon.net_logging:
    dest: file
    name: test
    facility: all
    level: notice
    state: absent

- name: file logging using platform agnostic module
  register: result
  ansible.netcommon.net_logging:
    dest: file
    name: test
    facility: all
    level: notice
    state: present

- assert:
    that:
      - result.changed == true
      - '"set system syslog file test facility all level notice" in result.commands'

- name: delete logging - teardown
  register: result
  ansible.netcommon.net_logging:
    dest: file
    name: test
    facility: all
    level: notice
    state: absent

- debug: msg="END vyos cli/net_logging.yaml on connection={{ ansible_connection
    }}"
