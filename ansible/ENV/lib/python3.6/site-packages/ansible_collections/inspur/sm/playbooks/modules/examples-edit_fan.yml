- name: fan test
  hosts: ism
  connection: local
  gather_facts: no
  vars:
    ism:
      host: "{{ ansible_ssh_host }}"
      username: "{{ username }}"
      password: "{{ password }}"

  tasks:

  - name: "set fan information"
    inspur.sm.edit_fan:
      mode: "Automatic"
      provider: "{{ ism }}"
      
  - name: "set fan information"
    inspur.sm.edit_fan:
      mode: "Manual"
      id: 1
      fan_speed: 80
      provider: "{{ ism }}"