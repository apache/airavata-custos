---
- name: Test data_input_monitor - CREATE
  data_input_monitor:
    name: "/var/log/messages"
    state: "present"
    recursive: True
  register: data_input_monitor_output

- name: Assert Create splunk.es.data_input_monitor CHANGED
  assert:
    that:
      - data_input_monitor_output is changed
      - data_input_monitor_output is not failed

- name: Test data_input_monitor - CREATE IDEMPOTENT
  data_input_monitor:
    name: "/var/log/messages"
    state: "present"
    recursive: True
  register: data_input_monitor_output2

- name: Assert Create splunk.es.data_input_monitor CREATE IDEMPOTENT
  assert:
    that:
      - data_input_monitor_output2 is not changed
      - data_input_monitor_output2 is not failed

- name: Test data_input_monitor - DELETE
  data_input_monitor:
    name: "/var/log/messages"
    state: "absent"
    recursive: True
  register: data_input_monitor_absent_output

- name: Assert Create splunk.es.data_input_monitor CHANGED
  assert:
    that:
      - data_input_monitor_absent_output is changed
      - data_input_monitor_absent_output is not failed

- name: Test data_input_monitor - DELETE IDEMPOTENT
  data_input_monitor:
    name: "/var/log/messages"
    state: "absent"
    recursive: True
  register: data_input_monitor_absent_output2

- name: Assert Create splunk.es.data_input_monitor DELETE IDEMPOTENT
  assert:
    that:
      - data_input_monitor_absent_output2 is not changed
      - data_input_monitor_absent_output2 is not failed
